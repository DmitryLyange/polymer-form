<!--
*
Component - list
*
-->
<dom-module id="form-list">
    <template>
        <iron-data-table selection-enabled on-selected-items-changed="_selected" items="[[items]]" style='flex:1;'>
            <data-table-column name$="{{getItemLabel(item,0)]]" filter-by&="{{getItemValue(item,0)]]" sort-by&="{{getItemValue(item,0)}}">
                <template>[[getItemValue(item,0)]]</template>
            </data-table-column>
            <data-table-column name$="{{getItemLabel(item,1)}}" filter-by$="{{getItemValue(item,1)}}" sort-by$="{{getItemValue(item,1)}}">
                <template>[[getItemValue(item,1)]]</template>
            </data-table-column>
            <data-table-column name$="{{getItemLabel(item,2)}}" filter-by$="{{getItemValue(item,2)}}" sort-by$="{{getItemValue(item,2)}}">
                <template>[[getItemValue(item,2)]]</template>
            </data-table-column>
            <data-table-column name$="{{getItemLabel(item,3)}}" filter-by$="{{getItemValue(item,3)}}" sort-by$="{{getItemValue(item,3)}}">
                <template>[[getItemValue(item,3)]]</template>
            </data-table-column>
            <data-table-column name$="{{getItemLabel(item,4)}}" filter-by$="{{getItemValue(item,4)}}" sort-by$="{{getItemValue(item,4)}}">
                <template>[[getItemValue(item,4)]]</template>
            </data-table-column>
        </iron-data-table>
    </template>
    <script>
        Polymer({
            is: 'form-list',

            behaviors: [
              Polymer.IronResizableBehavior
            ],

            properties: {
                items: {
                    type: Array,
                    observer: '_itemsChanged'
                }
            },

            setItems: function(data) {
                this.items = data;
            },

            getItemLabel: function(item, index) {
                if (item && item.length > 0) {
                    return item[index].field.label
                }
            },

            getItemValue: function(item, index) {
                if (item && item.length > 0) {
                    return item[index].field.value
                }
            },

            _selected: function(e) {
                var value = e.detail.value;
                if (value && value.indexSplices) {
                    if (value.indexSplices[0]) {
                        if (value.indexSplices[0].object[0]) {
                            this.fire('change-selection', {
                                item: value.indexSplices[0].object[0]
                            });
                        }
                    }
                }
            },

            _itemsChanged: function(data) {
                //  this.items = data;
            }
        });
    </script>
</dom-module>
