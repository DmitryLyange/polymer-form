<!--
*
Component - form
*
-->
<dom-module id='form-form'>
    <template>
        <style is='custom-style'>
            .flex-stretch-horizontal {
                @apply(--layout-horizontal);
                height: 100%;
            }

            .flex-stretch-vertical {
                @apply(--layout-vertical);
                height: 100%;
            }
        </style>
        <template is='dom-repeat' items='{{formData}}' as='item'>
            <template item={{item}} is='dom-if' if='{{isSimpleField(item.field.type)}}'>
                <paper-input-container style$='{{computeContainerClass(item.layout.align)}}'>
                    <label>{{item.field.label}}</label>
                    <input is='iron-input' bind-value='{{item.field.value}}' type={{item.field.type}}>
                </paper-input-container>
            </template>
            <template item={{item}} is='dom-if' if='{{isCheckbox(item.field.type)}}'>
                <paper-checkbox auto-validate checked='{{item.field.value}}' style$='{{computeContainerClass(item.layout.align)}}'>{{item.field.label}}</paper-checkbox>
            </template>
            <template item={{item}} is='dom-if' if='{{isPhone(item.field.type)}}'>
                <gold-phone-input auto-validate label='{{item.field.label}}' value='{{item.field.value}}' style$='{{computeContainerClass(item.layout.align)}}'></gold-phone-input>
            </template>
            <template item={{item}} is='dom-if' if='{{isMail(item.field.type)}}'>
                <gold-email-input auto-validate label='{{item.field.label}}' value='{{item.field.value}}' style$='{{computeContainerClass(item.layout.align)}}'></gold-email-input>
            </template>
        </template>
    </template>
    <script>
        Polymer({
            is: 'form-form',

            properties: {
                formData: {
                    type: Array,
                    notify: true,
                    observer: '_itemsChanged'
                }
            },

            _itemsChanged: function(data) {
                //  this.items = data;
            },

            computeContainerClass: function(align) {
                return 'flex:' + align.toString() + '%;'
            },

            isSimpleField: function(type) {
                return type !=='email' && type !=='tel' && type !=='checkbox'
            },

            isPhone: function(type) {
                return type ==='tel'
            },

            isMail: function(type) {
                return type ==='email'
            },

            isCheckbox: function(type) {
                return type ==='checkbox'
            },

            setData: function(data) {
                this.formData = data;
            }
        });
    </script>
</dom-module>
