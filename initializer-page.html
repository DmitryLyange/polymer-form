<!--
Some header
-->
<link rel="import" href="bower_components/paper-styles/paper-styles.html">

<link rel="import" href="bower_components/paper-button/paper-button.html">
<link rel="import" href="bower_components/iron-icons/iron-icons.html">
<link rel="import" href="bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="bower_components/paper-tabs/paper-tab.html">

<link rel="import" href="bower_components/app-route/app-location.html">
<link rel="import" href="bower_components/app-route/app-route.html">
<link rel="import" href="bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="bower_components/iron-pages/iron-pages.html">
<link rel="import" href="bower_components/iron-selector/iron-selector.html">

<link rel="import" href="form-data.html">
<link rel="import" href="form-list.html">
<link rel="import" href="form-form.html">

<dom-module id="initializer-page">
    <app-location route="{{route}}"></app-location>
    <app-route route="{{route}}" pattern="/:page" data="{{routeData}}" tail="{{subroute}}"></app-route>

    <template>
        <style is="custom-style">
            .flex-stretch-align {
                @apply(--layout-horizontal);
                height: 100%;
            }

            .flex-stretch-vertical {
                @apply(--layout-vertical);
                height: 100%;
            }

            .dataform,
            .datalist {
                @apply(--layout-flex-1);
            }
        </style>
        <form-data id="form-data" items="{{items}}" selected="{{selected}}"> </form-data>
        <paper-drawer-panel force-narrow>
            <paper-header-panel drawer>
                <paper-toolbar>
                    <div>Application</div>
                </paper-toolbar>
                <div> Drawer content... </div>
            </paper-header-panel>
            <paper-header-panel main>
                <paper-toolbar>
                    <paper-icon-button icon="menu" paper-drawer-toggle id='superimp'></paper-icon-button>
                    <div class="middle title">Title</div>
                    <div class="spacer"></div>
                    <paper-tabs selected="0" scrollable autoselect-delay="300" style="width: 600px;">
                        <paper-tab>Worckflow Scheme</paper-tab>
                        <paper-tab>Fields</paper-tab>
                        <paper-tab>Form</paper-tab>
                        <paper-tab>Security</paper-tab>
                        <paper-tab>E-mail Notifications</paper-tab>
                        <paper-tab>Export Settings</paper-tab>
                        <paper-tab>CSV Import</paper-tab>
                        <paper-tab>Event triggers</paper-tab>
                    </paper-tabs>
                </paper-toolbar>
                <div class="container flex-stretch-align">
                  <div class="datalist flex-stretch-vertical" style='flex:1;'>
                      <form-list id="list" items='[[items]]' selected='[[selected]]'></form-list>
                  </div>
                  <div class="dataform container flex-stretch-vertical" style='flex:1;'>
                      <form-form id="form" items='[[items]]' selected='[[selected]]'></form-form>
                  </div>
                </div>
            </paper-header-panel>
        </paper-drawer-panel>
    </template>

    <style>
        /* local DOM styles go here */
        :host {
            display: block;
            position: relative;
            min-height: 100vh;
            --app-primary-color: #202020;
            --app-secondary-color: #757575;
            --app-accent-color: #172C50;
            --paper-button-ink-color: var(--app-accent-color);
            --paper-icon-button-ink-color: var(--app-accent-color);
            --paper-spinner-color: var(--app-accent-color);
            -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
            color: var(--app-primary-color);
        }

        #paperDrawerPanel [main] {
            text-align: center;
            background-color: var(--google-grey-100);
        }

        #paperDrawerPanel [drawer] {
            border-right: 1px solid var(--google-grey-300);
        }

        #paperDrawerPanel[right-drawer] [drawer] {
            border-left: 1px solid var(--google-grey-300);
        }

        paper-toolbar paper-progress {
            --paper-progress-active-color: var(--accent-color);
        }

        .spacer {
            @apply(--layout-flex);
        }
    </style>
    </template>
    <script>
        Polymer({
            is: 'initializer-page',

            listeners: {
                'items-loaded': '_loadDataToList',
                'change-selection': '_loadDataToForm'
            },

            _loadDataToList: function(event) {
                var items = event.detail.items
                if (items && items.length > 0) {
                    this.$.list.setItems(items)
                }
            },
            _loadDataToForm: function(items) {
                //this.$.grid1.setItems(items)
            }
        });
    </script>

</dom-module>
